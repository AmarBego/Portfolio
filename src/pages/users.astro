---
import Layout from '../layouts/Layout.astro';
import UserCard from '../components/UserCard.astro';
import TransactionModal from '../components/TransactionModal.astro';
import '../styles/users.css';

const response = await fetch(`${import.meta.env.PUBLIC_API_URL}/api/users`);
const users = await response.json();
---

<Layout title="Users | Amar Begovic">
    <main class="users-main">
        <h1 class="glitch" data-text="Users">Users</h1>
        <p class="intro">View users and their transactions.</p>
        
        <div class="users-grid">
            {users.map((user) => (
                <UserCard user={user} />
            ))}
        </div>

        <TransactionModal />
    </main>
</Layout>

<script src="../scripts/userTransactions.js"></script>

<style>
    .users-main {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 4rem 2rem;
        background: var(--background);
        min-height: 100vh;
    }

    .intro {
        font-size: 1.2rem;
        margin-bottom: 3rem;
        text-align: center;
        color: var(--paragraph);
    }

    .users-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 2rem;
        width: 100%;
        max-width: 1200px;
    }

    @media (max-width: 768px) {
        .users-grid {
            grid-template-columns: 1fr;
        }
    }
</style>