---
import Layout from '../layouts/Layout.astro';

const response = await fetch(`${import.meta.env.PUBLIC_API_URL}/api/transactions`);
const transactions = await response.json();
---

<Layout title="Transactions | Amar Begovic">
    <main class="transactions-main">
        <h1 class="glitch" data-text="Transactions">Transactions</h1>
        <div class="transactions-list">
            {transactions.map((transaction) => (
                <div class="transaction-item">
                    <p>Amount: ${transaction.amount.toFixed(2)}</p>
                    <p>Description: {transaction.description}</p>
                    <p>Date: {new Date(transaction.date).toLocaleDateString()}</p>
                    <p>User ID: {transaction.userId}</p>
                </div>
            ))}
        </div>
    </main>
</Layout>

<style>
    .transactions-main {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 4rem 2rem;
        background: var(--background);
        min-height: 100vh;
    }

    .transactions-list {
        width: 100%;
        max-width: 800px;
        margin-top: 2rem;
    }

    .transaction-item {
        background: var(--stroke);
        border-radius: 10px;
        padding: 1rem;
        margin-bottom: 1rem;
        color: var(--paragraph);
    }

    .transaction-item p {
        margin: 0.5rem 0;
    }
</style>